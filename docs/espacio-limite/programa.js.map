{"version":3,"file":"programa.js","sources":["../../proyectos/espacio-limite/utilidades/ayudas.js","../../proyectos/espacio-limite/utilidades/Vector.js","../../proyectos/espacio-limite/utilidades/Elemento.js","../../proyectos/espacio-limite/utilidades/mensaje.js","../../proyectos/espacio-limite/datos.js","../../proyectos/espacio-limite/programa.js","../../proyectos/espacio-limite/utilidades/Cargador.js","../../proyectos/espacio-limite/imgs/mapa.jpg","../../proyectos/espacio-limite/imgs/barco.png"],"sourcesContent":["export function debounce(cb, delay = 200) {\n  let tiempo = null;\n\n  return (...args) => {\n    const siguiente = () => {\n      cb(...args);\n      clearTimeout(tiempo);\n      tiempo = setTimeout(siguiente, delay);\n    };\n  };\n}\n\nexport function distanciaEntreCoords(lat1, lon1, lat2, lon2) {\n  const R = 6378.137; // Radio de la tierra en KM\n  const dLat = ((lat2 - lat1) * Math.PI) / 180; // Grados a radians\n  const dLon = ((lon2 - lon1) * Math.PI) / 180;\n  const a =\n    0.5 -\n    Math.cos(dLat) / 2 +\n    (Math.cos((lat1 * Math.PI) / 180) * Math.cos((lat2 * Math.PI) / 180) * (1 - Math.cos(dLon))) / 2;\n\n  return R * 2 * Math.asin(Math.sqrt(a)); // en kilometros\n}\n\n// Sacado de https://www.w3.org/TR/motion-sensors/\n// limpia un poco la señal de un sensor como el accelerometro\nexport class LowPassFilterData {\n  constructor(reading, bias) {\n    Object.assign(this, { x: reading.x, y: reading.y, z: reading.z });\n    this.bias = bias;\n  }\n\n  update(reading) {\n    this.x = this.x * this.bias + reading.x * (1 - this.bias);\n    this.y = this.y * this.bias + reading.y * (1 - this.bias);\n    this.z = this.z * this.bias + reading.z * (1 - this.bias);\n  }\n}\n\nexport function aleatorio(min, max) {\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nexport function activarOrientacion(eventoOrientacion) {\n  // esto es necesario para ios 13+\n  if (window.DeviceOrientationEvent && typeof DeviceOrientationEvent.requestPermission === 'function') {\n    DeviceOrientationEvent.requestPermission()\n      .then((permissionState) => {\n        if (permissionState === 'granted') {\n          window.addEventListener('deviceorientation', eventoOrientacion, false);\n        }\n      })\n      .catch(console.error);\n  } else {\n    window.addEventListener('deviceorientation', eventoOrientacion, false);\n  }\n}\n","export default class Vector {\n  constructor(x = 0, y = 0, z = 0) {\n    this.x = x || 0;\n    this.y = y || 0;\n    this.z = z || 0;\n  }\n\n  definir(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  }\n\n  definirX(x) {\n    this.x = x;\n    return this;\n  }\n\n  definirY(y) {\n    this.y = y;\n    return this;\n  }\n\n  definirZ(z) {\n    this.z = z;\n    return this;\n  }\n\n  sumar(v) {\n    this.x += v.x;\n    this.y += v.y;\n    this.z += v.z;\n    return this;\n  }\n\n  sumarEscala(s) {\n    this.x += s;\n    this.y += s;\n    this.z += s;\n    return this;\n  }\n\n  restar(v) {\n    this.x -= v.x;\n    this.y -= v.y;\n    this.z -= v.z;\n    return this;\n  }\n\n  restarEscala(s) {\n    this.x -= s;\n    this.y -= s;\n    this.z -= s;\n    return this;\n  }\n\n  restarVectores(a, b) {\n    this.x = a.x - b.x;\n    this.y = a.y - b.y;\n    this.z = a.z - b.z;\n    return this;\n  }\n\n  multiplicar(v) {\n    this.x *= v.x;\n    this.y *= v.y;\n    this.z *= v.z;\n    return this;\n  }\n\n  multiplicarEscala(s) {\n    if (isFinite(s)) {\n      this.x *= s;\n      this.y *= s;\n      this.z *= s;\n    } else {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n    }\n    return this;\n  }\n\n  multiplicarVectores(a, b) {\n    this.x = a.x * b.x;\n    this.y = a.y * b.y;\n    this.z = a.z * b.z;\n    return this;\n  }\n\n  dividir(v) {\n    this.x /= v.x;\n    this.y /= v.y;\n    this.z /= v.z;\n    return this;\n  }\n\n  dividirEscala(s) {\n    return this.multiplicarEscala(1 / s);\n  }\n\n  longitudCuadrado() {\n    return this.x * this.x + this.y * this.y + this.z * this.z;\n  }\n\n  longitud() {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n  }\n\n  asignarLongitud(longitud) {\n    return this.multiplicarEscala(longitud / this.longitud());\n  }\n\n  /**\n   *\n   * @param {Vector} v - Una instancia de Vector\n   */\n  distanciaA(v) {\n    return Math.sqrt(this.distanciaAlCuadrado(v));\n  }\n\n  normalizar() {\n    return this.dividirEscala(this.longitud());\n  }\n\n  distanciaAlCuadrado(v) {\n    var dx = this.x - v.x;\n    var dy = this.y - v.y;\n    var dz = this.z - v.z;\n    return dx * dx + dy * dy + dz * dz;\n  }\n\n  esIgual(v) {\n    return this.x === v.x && this.y === v.y && this.z === v.z;\n  }\n\n  copiarDesde(v) {\n    this.x = v.x;\n    this.y = v.y;\n    this.z = v.z;\n    return this;\n  }\n}\n","export default class Elemento {\n  constructor(tipo, url) {\n    this.url = url;\n    this.solicitud = new XMLHttpRequest();\n    this.peso = 0;\n    this.cargado = false;\n    this.tipo = tipo;\n    this.totalCargado = 0;\n    this.elemento;\n  }\n}\n","const contenedor = document.getElementById('mensajes');\nconst mensaje = contenedor.querySelector('#texto');\n\nexport default {\n  esconder: () => {\n    contenedor.classList.add('esconder');\n  },\n\n  escribir: (texto) => {\n    mensaje.innerText = `...\\n\\n${texto}\\n...`;\n  },\n};\n","import Vector from './utilidades/Vector';\n\nexport default [\n  {\n    vector: new Vector(216, 338),\n    distMin: 100,\n    ele: null,\n    tipo: 'texto',\n    mensaje: 'HOLA!',\n  },\n  {\n    vector: new Vector(1052, 427),\n    distMin: 100,\n    ele: null,\n    tipo: 'imagen',\n    url: ',,,,',\n    mensaje: '',\n  },\n  {\n    vector: new Vector(1864, 207),\n    distMin: 100,\n    ele: null,\n    tipo: 'video',\n    url: '...',\n  },\n  {\n    vector: new Vector(2344, 214),\n    distMin: 100,\n    ele: null,\n    tipo: 'sonido',\n    url: '...',\n  },\n  {\n    vector: new Vector(1648, 607),\n    distMin: 100,\n    ele: null,\n  },\n  {\n    vector: new Vector(3845, 718),\n    distMin: 100,\n    ele: null,\n  },\n  {\n    vector: new Vector(1568, 1488),\n    distMin: 100,\n    ele: null,\n  },\n  {\n    vector: new Vector(118, 1750),\n    distMin: 100,\n    ele: null,\n  },\n  {\n    vector: new Vector(3191, 1800),\n    distMin: 100,\n    ele: null,\n  },\n  {\n    vector: new Vector(2797, 1887),\n    distMin: 100,\n    ele: null,\n  },\n  {\n    vector: new Vector(100, 2179),\n    distMin: 100,\n    ele: null,\n  },\n  {\n    vector: new Vector(2168, 2456),\n    distMin: 100,\n    ele: null,\n  },\n  {\n    vector: new Vector(1258, 2589),\n    distMin: 100,\n    ele: null,\n  },\n  {\n    vector: new Vector(1937, 2893),\n    distMin: 100,\n    ele: null,\n  },\n  {\n    vector: new Vector(268, 3605),\n    distMin: 100,\n    ele: null,\n  },\n];\n","import './scss/estilos.scss';\n\nimport { LinearAccelerationSensor } from 'motion-sensors-polyfill';\nimport { LowPassFilterData, activarOrientacion, aleatorio } from './utilidades/ayudas';\nimport Vector from './utilidades/Vector';\nimport Elemento from './utilidades/Elemento';\nimport Cargador from './utilidades/Cargador';\nimport mensaje from './utilidades/mensaje';\nimport datosColisiones from './datos';\n\nimport mapaUrl from './imgs/mapa.jpg';\nimport barcoUrl from './imgs/barco.png';\n\nconst iniciarBtn = document.getElementById('iniciar');\nconst consola = document.getElementById('consola');\nconst canvasPlano = document.getElementById('plano');\nconst ctxPlano = canvasPlano.getContext('2d');\n\nlet rotacion = 0;\nconst ref = new Vector();\nconst centro = new Vector();\n\nconst cargador = new Cargador();\n// De momento el cargador reconoce 'imagen' y 'sonido'.\nconst plano = new Elemento('imagen', mapaUrl);\nconst barco = new Elemento('imagen', barcoUrl);\n\ncargador.agregar([plano, barco]);\n\ncargador.on('progreso', (datos) => {\n  mensaje.escribir(`${datos.porcentajeCargado}%`);\n});\n\ncargador.on('listo', iniciar);\ncargador.cargar();\n\nfunction iniciar() {\n  iniciarBtn.classList.remove('esconder');\n  mensaje.esconder();\n\n  const planoImg = plano.elemento;\n  actualizarDimensiones();\n\n  ref.x = aleatorio(0, -planoImg.naturalWidth + canvasPlano.width);\n  ref.y = aleatorio(0, -planoImg.naturalHeight + canvasPlano.height);\n  console.log(ref);\n  pintarFondo();\n\n  iniciarBtn.onclick = () => {\n    document.getElementById('intro').style.display = 'none';\n    dibujar(0);\n\n    activarOrientacion((evento) => {\n      rotacion = evento.alpha * (Math.PI / 180);\n      dibujar();\n    });\n\n    let minMov = 0.65;\n    let moviendoseAdelante = false;\n    let pasos = 0;\n\n    const accl = new LinearAccelerationSensor({ frequency: 50 });\n    const filter = new LowPassFilterData(accl, 0.8);\n\n    accl.onreading = () => {\n      filter.update(accl);\n      // Podómetro SUUUUUPPPERRRRR sencillo y a veces impreciso, pero funciona para el experimento.\n      if (filter.y > minMov) {\n        moviendoseAdelante = true;\n        return;\n      } else if (moviendoseAdelante) {\n        pasos++;\n        consola.innerText = `pasos: ${pasos}`;\n        moviendoseAdelante = false;\n\n        const _x = Math.sin(rotacion) * 30;\n        const _y = Math.cos(rotacion) * 30;\n\n        if (rotacion >= 0) {\n          ref.x -= _x;\n          ref.y -= _y;\n        } else {\n          ref.x += _x;\n          ref.y += _y;\n        }\n      }\n    };\n    accl.start();\n  };\n\n  window.onresize = actualizarDimensiones;\n}\n\nfunction pintarFondo() {\n  const planoImg = plano.elemento;\n  const _x = ref.x;\n  const _y = ref.y;\n\n  ctxPlano.clearRect(0, 0, canvasPlano.width, canvasPlano.height);\n  ctxPlano.save();\n  ctxPlano.translate(canvasPlano.width / 2, canvasPlano.height / 2);\n  ctxPlano.rotate(rotacion);\n  ctxPlano.drawImage(planoImg, ref.x, ref.y);\n  ctxPlano.restore();\n\n  datosColisiones.forEach((d) => {\n    const pos = new Vector(d.vector.x + _x, d.vector.y + _y);\n    if (!d.ele) d.ele = crearRadar();\n\n    if (!d.hasOwnProperty('pos')) {\n      d.pos = pos;\n    }\n  });\n}\n\nfunction dibujar() {\n  const barcoImg = barco.elemento;\n  pintarFondo();\n\n  /**\n   * Pintar barco (por ahora siempre en el centro, pero podria ser distinto).\n   * Acá tambien se puede cambiar el barco por otra imagen.\n   */\n\n  ctxPlano.drawImage(barcoImg, centro.x - barco.centro.x, centro.y - barco.centro.y);\n}\n\nfunction actualizarDimensiones() {\n  const ancho = window.innerWidth;\n  const alto = window.innerHeight;\n  canvasPlano.width = ancho;\n  canvasPlano.height = alto;\n\n  centro.x = (ancho / 2) | 0;\n  centro.y = (alto / 2) | 0;\n}\n\nconst ondas = document.getElementById('ondas');\n\nfunction crearRadar() {\n  const contenedor = document.createElement('span');\n  const onda = document.createElement('span');\n\n  contenedor.className = 'circulo';\n  onda.className = 'onda';\n\n  contenedor.appendChild(onda);\n  ondas.appendChild(contenedor);\n\n  return contenedor;\n}\n\ncanvasPlano.onmousemove = (e) => {\n  ref.x = e.clientX;\n  ref.y = e.clientY;\n\n  datosColisiones.forEach((d) => {\n    const distancia = ref.distanciaA(d.pos);\n    console.log(distancia);\n\n    if (distancia <= d.distMin) {\n      console.log(ref);\n      if (!d.ele.classList.contains('prendido')) {\n        d.ele.classList.add('prendido');\n      }\n      d.ele.style.transform = `translate(${d.pos.x - 150}px, ${d.pos.y - 150}px)`;\n    } else {\n      d.ele.classList.remove('prendido');\n    }\n  });\n};\n","import Eventos from 'eventemitter3';\n\nexport default class Cargador extends Eventos {\n  constructor() {\n    super();\n    this._pesoTotal = 0;\n    this._pesosDefinidos = 0;\n    this._pesoCargado = 0;\n    this._totalCargados = 0;\n    this.fila = [];\n  }\n\n  agregar(elementos) {\n    this.fila = [...this.fila, ...elementos];\n  }\n\n  cargar() {\n    this.emit('iniciandoPrecarga');\n\n    this.fila.forEach((elemento) => {\n      const solicitud = elemento.solicitud;\n      const respuesta = { tipo: elemento.tipo, url: elemento.url };\n\n      switch (elemento.tipo) {\n        case 'imagen':\n          solicitud.responseType = 'blob';\n          break;\n        case 'sonido':\n          solicitud.responseType = 'arraybuffer';\n          break;\n      }\n\n      solicitud.open('GET', elemento.url, true);\n      solicitud.onloadstart = () => this.emit('cargandoElemento', respuesta);\n      solicitud.onloadend = () => this.emit('elementoCargado', respuesta);\n      solicitud.onprogress = (e) => this._actualizarProgreso(e, elemento);\n      solicitud.onerror = (err) => this.emit('errorCargandoElemento', { ...respuesta, error: err });\n      solicitud.onload = () => {\n        if (solicitud.status === 200) {\n          if (elemento.tipo === 'imagen') {\n            const img = new Image();\n            img.onload = () => {\n              this._totalCargados++;\n              elemento.cargado = true;\n              elemento.elemento = img;\n\n              elemento.centro = {\n                x: img.naturalWidth / 2,\n                y: img.naturalHeight / 2,\n              };\n\n              this._revisar();\n            };\n            img.src = URL.createObjectURL(solicitud.response);\n          } else {\n            elemento.elemento = solicitud.response;\n            elemento.cargado = true;\n\n            this._revisar();\n          }\n        } else {\n          throw new Error(`Problema cargando elemento ${elemento.url} del servidor`);\n        }\n      };\n\n      solicitud.send(null);\n    });\n  }\n\n  _reiniciarCargador() {\n    this._pesoTotal = 0;\n    this._pesosDefinidos = 0;\n    this._pesoCargado = 0;\n    this._totalCargados = 0;\n    this.fila = [];\n  }\n\n  _actualizarProgreso(e, elemento) {\n    if (e.lengthComputable) {\n      if (elemento.peso === 0) {\n        elemento.peso = e.total;\n        this._pesoTotal += e.total;\n        this._pesosDefinidos++;\n      }\n\n      if (this._pesosDefinidos === this.fila.length) {\n        elemento.totalCargado = e.loaded;\n        this._pesoCargado = this.fila.map((ele) => ele.totalCargado).reduce((suma, cargado) => suma + cargado);\n\n        this.emit('progreso', {\n          porcentajeCargado: Math.floor((this._pesoCargado / this._pesoTotal) * 100),\n          totalElementosCargando: this.fila.length,\n        });\n      }\n    } else {\n      elemento.solicitud.onprogress = null;\n    }\n  }\n\n  _revisar() {\n    if (this._totalCargados === this.fila.length) {\n      this._reiniciarCargador();\n      this.emit('listo');\n    }\n  }\n}\n","export default \"8eb47464a8bb1d59.jpg\"","export default \"a4894765934652e1.png\""],"names":["LowPassFilterData","[object Object]","reading","bias","Object","assign","this","x","y","z","aleatorio","min","max","Math","floor","random","Vector","v","s","a","b","isFinite","multiplicarEscala","sqrt","longitud","distanciaAlCuadrado","dividirEscala","dx","dy","dz","Elemento","tipo","url","solicitud","XMLHttpRequest","peso","cargado","totalCargado","elemento","contenedor","document","getElementById","mensaje","querySelector","classList","add","texto","innerText","vector","distMin","ele","iniciarBtn","consola","canvasPlano","ctxPlano","getContext","rotacion","ref","centro","cargador","Eventos","super","_pesoTotal","_pesosDefinidos","_pesoCargado","_totalCargados","fila","elementos","emit","forEach","respuesta","responseType","open","onloadstart","onloadend","onprogress","e","_actualizarProgreso","onerror","err","error","onload","status","Error","img","Image","naturalWidth","naturalHeight","_revisar","src","URL","createObjectURL","response","send","lengthComputable","total","length","loaded","map","reduce","suma","porcentajeCargado","totalElementosCargando","_reiniciarCargador","plano","barco","pintarFondo","planoImg","_x","_y","clearRect","width","height","save","translate","rotate","drawImage","restore","datosColisiones","d","pos","createElement","onda","className","appendChild","ondas","crearRadar","hasOwnProperty","dibujar","barcoImg","actualizarDimensiones","ancho","window","innerWidth","alto","innerHeight","agregar","on","datos","remove","console","log","onclick","eventoOrientacion","style","display","evento","alpha","PI","DeviceOrientationEvent","requestPermission","then","permissionState","addEventListener","catch","moviendoseAdelante","pasos","accl","LinearAccelerationSensor","frequency","filter","onreading","update","sin","cos","start","onresize","cargar","onmousemove","clientX","clientY","distancia","distanciaA","contains","transform"],"mappings":"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"}